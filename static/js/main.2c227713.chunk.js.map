{"version":3,"sources":["context/SnakeContext.js","context/create.context.helper.js","hooks/useInterval.js","components/Container.js","components/Cell.js","components/Row.js","components/App.js","index.js"],"names":["initialState","snake","x","y","direct","food","foodExsit","stop","reducer","actions","Context","createContext","Provider","children","useReducer","state","dispatch","boundActions","key","value","createContextHelper","type","payload","actionTypes","CHANGE_DIRECTION","MOVE","CREATE_FOOD","EAT_FOOD","STOP","RESET","changeDirection","move","head","body","pop","createFood","randomFoodPosition","eatFood","last_location","newSnake","setStop","reset","Math","floor","random","forEach","piece","useInterval","cb","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","LAST_LOCATION","Container","useContext","SnakeContext","length","_","findIndex","slice","tabIndex","onKeyDown","e","directObj","37","38","39","40","keyCode","className","Cell","active","Row","yaxis","row","useMemo","Array","map","v","i","_food","App","onClick","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.2c227713.chunk.js","sourcesContent":["import createContextHelper from \"./create.context.helper\";\n\nconst initialState = {\n\tsnake: [{ x: 6, y: 5 }],\n\tdirect: \"top\",\n\tfood: {},\n\tfoodExsit: false,\n\tstop: false\n};\n\nconst reducer = (state, { type, payload }) => {\n\tswitch (type) {\n\t\tcase actionTypes.CHANGE_DIRECTION:\n\t\t\treturn { ...state, direct: payload };\n\t\tcase actionTypes.MOVE:\n\t\t\treturn { ...state, snake: payload };\n\t\tcase actionTypes.CREATE_FOOD:\n\t\t\treturn { ...state, ...payload };\n\t\tcase actionTypes.EAT_FOOD:\n\t\t\treturn { ...state, ...payload };\n\t\tcase actionTypes.STOP:\n\t\t\treturn { ...state, stop: true };\n\t\tcase actionTypes.RESET:\n\t\t\treturn { ...initialState };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst move = (dispatch, state) => () => {\n\tconst { direct, snake } = state;\n\tlet head = { ...snake[0] };\n\tlet body = [...snake];\n\tlet { x, y } = head;\n\tswitch (direct) {\n\t\tcase \"left\":\n\t\t\tx--;\n\t\t\tbreak;\n\t\tcase \"right\":\n\t\t\tx++;\n\t\t\tbreak;\n\t\tcase \"down\":\n\t\t\ty++;\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tdefault:\n\t\t\ty--;\n\t\t\tbreak;\n\t}\n\n\tbody = [{ x, y }, ...body];\n\tbody.pop();\n\tdispatch({\n\t\ttype: actionTypes.MOVE,\n\t\tpayload: body\n\t});\n};\n\nconst changeDirection = (dispatch) => (direct) => {\n\tdispatch({\n\t\ttype: actionTypes.CHANGE_DIRECTION,\n\t\tpayload: direct\n\t});\n};\n\nconst createFood = (dispatch, state) => () => {\n\tconst { snake } = state;\n\tconst food = randomFoodPosition(snake);\n\tdispatch({\n\t\ttype: actionTypes.CREATE_FOOD,\n\t\tpayload: { food, foodExsit: true }\n\t});\n};\n\nconst eatFood = (dispatch, state) => (last_location) => {\n\tconst { snake } = state;\n\tconst newSnake = [...snake, last_location];\n\tdispatch({\n\t\ttype: actionTypes.EAT_FOOD,\n\t\tpayload: { foodExsit: false, snake: newSnake, food: {} }\n\t});\n};\n\nconst setStop = (dispatch) => () => {\n\tdispatch({\n\t\ttype: actionTypes.STOP\n\t});\n};\n\nconst reset = (dispatch) => () => {\n\tdispatch({\n\t\ttype: actionTypes.RESET\n\t});\n};\n\nexport const { Context, Provider } = createContextHelper(\n\treducer,\n\t{ changeDirection, move, createFood, eatFood, setStop, reset },\n\tinitialState\n);\n\nconst actionTypes = {\n\tMOVE: \"MOVE\",\n\tCHANGE_DIRECTION: \"CHANGE_DIRECTION\",\n\tCREATE_FOOD: \"CREATE_FOOD\",\n\tEAT_FOOD: \"EAT_FOOD\",\n\tSTOP: \"STOP\",\n\tRESET: \"RESET\"\n};\n\nconst randomFoodPosition = (body) => {\n\tconst x = Math.floor(Math.random() * 14);\n\tconst y = Math.floor(Math.random() * 11);\n\tlet food = { x, y };\n\tbody.forEach((piece) => {\n\t\tif (piece.x === x && piece.y === y) {\n\t\t\tfood = randomFoodPosition(body);\n\t\t}\n\t});\n\n\treturn food;\n};\n","import React, { createContext, useReducer } from \"react\";\n\nexport default (reducer, actions, initialState) => {\n\tconst Context = createContext();\n\n\tconst Provider = ({ children }) => {\n\t\tconst [state, dispatch] = useReducer(reducer, initialState);\n\n\t\tconst boundActions = {};\n\t\tfor (let key in actions) {\n\t\t\tboundActions[key] = actions[key](dispatch, state);\n\t\t}\n\n\t\treturn (\n\t\t\t<Context.Provider value={{ state, ...boundActions }}>\n\t\t\t\t{children}\n\t\t\t</Context.Provider>\n\t\t);\n\t};\n\n\treturn { Context, Provider };\n};\n","import React, { useRef, useEffect } from \"react\";\n\nconst useInterval = (cb, delay) => {\n\tconst savedCallback = useRef();\n\n\tuseEffect(() => {\n\t\tsavedCallback.current = cb;\n\t}, [cb]);\n\n\tuseEffect(() => {\n\t\tfunction tick() {\n\t\t\tsavedCallback.current();\n\t\t}\n\n\t\tif (delay !== null) {\n\t\t\tlet id = setInterval(tick, delay);\n\t\t\treturn () => clearInterval(id);\n\t\t}\n\t}, [delay]);\n};\n\nexport default useInterval;\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { Context as SnakeContext } from \"../context/SnakeContext\";\nimport useInterval from \"../hooks/useInterval\";\nimport _ from \"lodash\";\n\nlet LAST_LOCATION = {};\n\nconst Container = ({ children }) => {\n\tconst {\n\t\tstate: { direct, snake, foodExsit, food, stop },\n\t\tchangeDirection,\n\t\tmove,\n\t\tcreateFood,\n\t\teatFood,\n\t\tsetStop,\n\t\treset\n\t} = useContext(SnakeContext);\n\n\tuseEffect(() => {\n\t\tconst length = snake.length;\n\t\tif (\n\t\t\tsnake[0].x < 0 ||\n\t\t\tsnake[0].y < 0 ||\n\t\t\tsnake[0].x > 13 ||\n\t\t\tsnake[0].y > 10 ||\n\t\t\t(snake.length > 3 && _.findIndex(snake.slice(1), snake[0]) !== -1)\n\t\t) {\n\t\t\tsetStop();\n\t\t}\n\n\t\tif (foodExsit) {\n\t\t\tif (snake[0].x === food.x && snake[0].y === food.y) {\n\t\t\t\teatFood(LAST_LOCATION);\n\t\t\t}\n\t\t} else {\n\t\t\tcreateFood();\n\t\t}\n\n\t\tLAST_LOCATION = snake[length - 1];\n\t}, [snake, foodExsit]);\n\n\tconst onKeyDownHandler = (e) => {\n\t\tconst directObj = { 37: \"left\", 38: \"top\", 39: \"right\", 40: \"down\" };\n\t\tconst { keyCode } = e;\n\n\t\tif (keyCode === 13) {\n\t\t\treset();\n\t\t}\n\n\t\tif (directObj[keyCode] !== direct) {\n\t\t\tif (\n\t\t\t\t(direct === \"left\" && keyCode !== 39) ||\n\t\t\t\t(direct === \"right\" && keyCode !== 37) ||\n\t\t\t\t(direct === \"top\" && keyCode !== 40) ||\n\t\t\t\t(direct === \"down\" && keyCode !== 38)\n\t\t\t) {\n\t\t\t\tchangeDirection(directObj[keyCode]);\n\t\t\t}\n\t\t}\n\t};\n\n\tuseInterval(move, !stop ? 250 : null);\n\n\treturn (\n\t\t<div tabIndex=\"0\" onKeyDown={onKeyDownHandler} className=\"body\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"score\">Your Score: {snake.length - 1}</div>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Container;\n","import React from \"react\";\n\nconst Cell = ({ active, food }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={`cell ${active ? \"active\" : \"\"} ${food ? \"food\" : \"\"}`}\n\t\t></div>\n\t);\n};\n\nexport default Cell;\n","import React, {\n\tcloneElement,\n\tuseContext,\n\tuseState,\n\tuseEffect,\n\tuseMemo\n} from \"react\";\nimport { Context as SnakeContext } from \"../context/SnakeContext\";\nimport Cell from \"./Cell\";\n\nconst Row = ({ yaxis }) => {\n\tconst {\n\t\tstate: { snake, food }\n\t} = useContext(SnakeContext);\n\n\tconst row = useMemo(() => {\n\t\treturn [...Array(14)].map((v, i) => {\n\t\t\tlet active = false;\n\t\t\tlet _food = false;\n\t\t\tsnake.forEach((piece) => {\n\t\t\t\tif (piece.x === i && piece.y === yaxis) {\n\t\t\t\t\tactive = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (food.x === i && food.y === yaxis) {\n\t\t\t\t_food = true;\n\t\t\t}\n\t\t\treturn <Cell key={i} food={_food} active={active} />;\n\t\t});\n\t}, [snake, food]);\n\n\treturn <div className=\"row\">{row}</div>;\n};\n\nexport default Row;\n","import React, { useContext } from \"react\";\nimport { Context as SnakeContext } from \"../context/SnakeContext\";\nimport \"../css/style.css\";\nimport Container from \"./Container\";\nimport Row from \"./Row\";\n\nconst App = () => {\n\tconst {\n\t\tstate: { stop },\n\t\treset\n\t} = useContext(SnakeContext);\n\n\tconst uiResetBtn = () => {\n\t\treturn (\n\t\t\t<div className=\"die\">\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"die-title\">You Dead</div>\n\t\t\t\t\t<button onClick={reset} className=\"die-btn\">\n\t\t\t\t\t\tReset\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<Container>\n\t\t\t{stop && uiResetBtn()}\n\t\t\t{[...Array(11)].map((v, i) => (\n\t\t\t\t<Row key={i} yaxis={i} />\n\t\t\t))}\n\t\t</Container>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport { Provider as SnakeProvider } from \"./context/SnakeContext\";\n\nReactDOM.render(\n\t<SnakeProvider>\n\t\t<App />\n\t</SnakeProvider>,\n\tdocument.querySelector(\"#root\")\n);\n"],"sourceRoot":""}